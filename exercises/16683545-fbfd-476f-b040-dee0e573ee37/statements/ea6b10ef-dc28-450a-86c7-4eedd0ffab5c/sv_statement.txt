<p>I en tabell är det möjligt att <strong>infoga värden som erhålls direkt från resultatet av en fråga.</strong></p><p><img alt="" src="https ://ikastaroak. birt.eus/edu/argitalpen/backupa/20200331/1920k/es/DAMDAW/BD/BD06/es_DAMDAW_BD06_Contenidos/BD06_CONT_R31_INSERT_SELECT_miniatura.png" /></p>><h3>" /></p>><h3> Låt oss föreställa oss att vi kommer att omstrukturera företaget, så att de anställda på <code>'Public Relations'</code>-avdelningen kommer att integreras i <code>'Sälj'</code>-avdelningen.</p ><p> Informationen om anställda som har länkats till <code>"Public Relations"</code>-avdelningen måste läggas till i tabellen <code>job_history</code> innan de omtilldelas till <code>"Sälj" '</code>-avdelningen .</p><p>Vi börjar med att göra en fråga som letar efter informationen från de anställda på <code>'Public Relations'</code>-avdelningen:</p><blockquote ><pre><code>VÄLJ ANSTÄLLDA.* <br />FRÅN ANSTÄLLDA GÅ MED AVDELNINGAR PÅ (EMPLOYEES.DEPARTMENT_ID = DEPARTMENTS.DEPARTMENT_ID)<br />WHERE DEPARTMENT_NAME = 'Public Relations';</code><br /><br /> anställd_id | förnamn | efternamn | e-post | telefonnummer | anställningsdatum | jobb_id | lön | provision_pct | manager_id | department_id <br />-------------+-------------+-----------+------ --+-------------+---------------------+--------+-- --------+----------------+------------+------------ ----<br /> 204 | Herman | bar | HBAER | 515.123.8888 | 1994-06-07 00:00:00 | PR_REP | 10000,00 | | 101 | 70<br />(1 rad)</pre></blockquote><p>Närnäst måste vi veta vilken data vi behöver lägga till i tabellen <code>job_history</code> för att anpassa den tidigare frågan till kraven i tabellen <code>job_history</code>:</p><blockquote><pre><code>\d job_history</code><br /><br /> Tabell "public.job_history"<br /> Kolumn | Skriv | Samling | Nullbar | Standard<br />---------------+---------------------------------------- +-----------+----------+---------<br /> anställd_id | heltal | | inte null |<br /> startdatum | tidsstämpel utan tidszon | | inte null |<br /> slutdatum | tidsstämpel utan tidszon | | inte null | <br /> jobb_id | teckenvarierande(10) | | inte null | <br /> avdelnings-id | heltal | | | </pre></blockquote><p>Av all information om de anställda på <code>'Public Relations'</code>-avdelningen har vi följande information kvar:</p><blockquote><pre ><code >SELECT EMPLOYEE_ID, HIRE_DATE, CURRENT_DATE, JOB_ID, EMPLOYEES.DEPARTMENT_ID<br />FRÅN ANSTÄLLDA GÅR MED AVDELNINGAR PÅ (EMPLOYEES.DEPARTMENT_ID = DEPARTMENTS.DEPARTMENT_ID)<br />Relationer =';</ublic>NAME <br / ><br /> anställd_id | anställningsdatum | aktuellt_datum | jobb_id | department_id <br />-------------+---------------------------+-------- --+--------+--------------<br /> 204 | 1994-06-07 00:00:00 | 2022-08-31 | PR_REP | 70<br />(1 rad)</pre></blockquote><p>När data som härrör från satsen uppfyller kraven i tabellen <code>job_history</code> kan vi använda den frågan som källa till data som ska användas i infogningen som vi måste utföra i tabellen <code>job_history</code>.</p><blockquote><pre><code>BEGIN;<br /><br /> <strong> INSERT INTO job_history<br />VÄLJ EMPLOYEE_ID, HIRE_DATE, CURRENT_DATE. /strong><br />-- INFOGA 0 1<br /><br />VÄLJ MEDARBETARE_ID, START_DATE, END_DATE, JOB_ID, JH.DEPARTMENT_ID<br />FRÅN JOB_HISTORY JH GÅ MED AVDELNINGAR PÅ (JH.DEPARTMENT_ID = DEPARTMENTS.DEPARTMENT_ID )<br />WHERE DEPARTMENT_NAME = 'Public Relations';<br />ROLLBACK;</code></pre></blockquote><h3>Övning</h3><p>Låt oss skapa olika avdelningar för chefer. För att göra detta kommer vi att infoga, i tabellen <code>avdelningar</code>, en post för var och en av de typer av arbete vars identifierare slutar med <code>'_MAN'</code>, med följande data:< /p ><ul><li><code>DEPARTMENT_ID</code>: den som är resultatet av att <code>DEPARTMENT_ID</code> för den anställde som ska utses till chef för avdelningen ökas med 300.</li ><li ><code>DEPARTMENT_NAME</code> - <code>JOB_TITLE</code> för den typ av jobb som infogas.</li><li><code>MANAGER_ID</code> - Den minsta medarbetaridentifieraren av bland dem med den typ av jobb som infogas.</li><li><code>LOCATION_ID</code>: konstantvärdet 1700</li></ul>