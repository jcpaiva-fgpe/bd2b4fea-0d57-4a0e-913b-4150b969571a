<p>Caso algum dos registros que desejamos deletar esteja sendo referenciado por algum outro registro de outra tabela com a qual existe um relacionamento, a instrução <code>DELETE</code> mostrará um erro que impedirá execute essa frase.</p><h3>Exemplo</h3><p>A frase a seguir permite eliminar o país com o identificador <code>'AR'</code>:</p ><blockquote><pre> <code>BEGIN;<br /><br /><strong>EXCLUIR DE países<br />WHERE COUNTRY_ID = 'AR';</strong><br /><br />ROLLBACK ;</code></ pre></blockquote><p>Como podemos ver, a sentença é executada sem erros.</p><p>Agora, se quiséssemos eliminar o país cujo identificador era <code> 'IT'</code>: </p><blockquote><pre><code>BEGIN;<br /><br /><strong>EXCLUIR DE países<br />WHERE COUNTRY_ID = 'IT';</ strong><br /><code >-- ERRO: atualizar ou excluir na tabela "países" viola a restrição de chave estrangeira "locations_country_id_fkey" na tabela "locations"</code><br /><br />ROLLBACK;</code ></pre></blockquote ><p>O que Isso significa que existem endereços relacionados a esse país, portanto, excluir esse país não é permitido.</p><p>Para excluir qualquer país que tenha um endereço relacionado, se estritamente necessário, primeiro devemos remover as referências de endereço a esse país:</p><blockquote><pre><code>BEGIN;<br /><br /><strong>UPDATE locais<br />SET COUNTRY_ID = NULL<br / >WHERE COUNTRY_ID = 'IT';< /strong><br />UPDATE 2<br /><br /><strong>EXCLUIR DOS países<br />WHERE COUNTRY_ID = 'IT';</strong><br / >EXCLUIR 1<br /><br />ROLLBACK;</code></pre></blockquote><p>Podemos verificar como, eliminando as referências à Itália, fomos autorizados a excluir esse país.</ p><h3>Exercício</h3 ><p>Excluir o trabalho <code>'ST_MAN'</code>. Caso haja um funcionário que esteja desempenhando esse trabalho atualmente ou que, de acordo com a tabela <code>job_history</code>, o tenha feito em alguma ocasião, atribua previamente o trabalho a ele com <code>'ST_CLERK' </code >.</p>