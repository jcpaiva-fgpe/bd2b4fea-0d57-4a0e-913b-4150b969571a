<p>Cuando insertamos registros en una tabla en la que se ha definido alguna <code>FOREIGN KEY</code> es necesario que se cumplan las restricciones de integridad definidas antes de poder llevar a cabo la inserci&oacute;n</p><h3>Ejemplo:</h3><p>Si quisi&eacute;ramos insertar la direcci&oacute;n del instituto Carlos III en la tabla <code>locations</code> del esquema <code>HR</code>. Los datos que habr&iacute;a que insertar ser&iacute;an:</p><table align="center" border="1" summary="Results from query 2"><tbody><tr><th style="background-color:#9e9e9e; text-align:center">LOCATION_ID</th><th style="background-color:#9e9e9e; text-align:center">STREET_ADDRESS</th><th style="background-color:#9e9e9e; text-align:center">POSTAL_CODE</th><th style="background-color:#9e9e9e; text-align:center">CITY</th><th style="background-color:#9e9e9e; text-align:center">STATE_PROVINCE</th><th style="background-color:#9e9e9e; text-align:center">COUNTRY_ID</th></tr><tr><td>3300</td><td>C/Carlos III, 3</td><td>30201</td><td>Cartagena</td><td>Murcia</td><td>ES</td></tr></tbody></table><blockquote><p><code>INSERT INTO locations (LOCATION_ID, STREET_ADDRESS, POSTAL_CODE, CITY, STATE_PROVINCE, COUNTRY_ID)<br />VALUES (3300, &#39;C/Carlos III, 3&#39;, 30201, &#39;Cartagena&#39;, &#39;Murcia&#39;, &#39;ES&#39;);</code></p></blockquote><p>Si nos fijamos, el <code>COUNTRY_ID</code> es <code>&#39;ES&#39;</code>, pero, entre los datos que se incluyen en el esquema <code>HR</code>, no se encuentra ning&uacute;n pa&iacute;s en el que el valor del atributo <code>COUNTRY_ID</code> sea <code>&#39;ES&#39;</code>. Lo que provocar&iacute;a un fallo: </p><p><blockquote><pre><code>ERROR:  insert or update on table "locations" violates foreign key constraint "locations_country_id_fkey"<br />DETAIL:  Key (country_id)=(ES) is not present in table "countries"..</code></pre></blockquote></p><p>B&aacute;sicamente, ese fallo significa que no podemos indicar que <code>Cartagena</code> est&aacute; relacionada con el pa&iacute;s cuyo c&oacute;digo es <code>&#39;ES&#39;</code> si en la base de datos no existe ning&uacute;n pa&iacute;s con ese c&oacute;digo.</p><p>Por eso, deber&iacute;amos insertar en primer lugar los datos de <code>Spain</code> en la tabla <code>countries</code> del esquema <code>HR</code> antes de poder insertar el <code>Carlos III</code> como direcci&oacute;n.</p><blockquote><p><code>BEGIN;<br /><br />INSERT INTO countries (COUNTRY_ID, COUNTRY_NAME, REGION_ID)<br />VALUES (&#39;ES&#39;, &#39;Spain&#39;, 1);<br />-- INSERT 0 1</code></p></blockquote><p>Una vez insertado el pa&iacute;s correctamente, ya podremos volver a lanzar la sentencia anterior, esta vez sin error.</p><blockquote><p><code>INSERT INTO locations (LOCATION_ID, STREET_ADDRESS, POSTAL_CODE, CITY, STATE_PROVINCE, COUNTRY_ID)<br />VALUES (3300, &#39;C/Carlos III, 3&#39;, 30201, &#39;Cartagena&#39;, &#39;Murcia&#39;, &#39;ES&#39;);<br />-- INSERT 0 1<br /><br />ROLLBACK;</code></p></blockquote><h3>Ejercicio</h3><p>Inserta tus datos en el departamento de <code>Web Development</code>.</p><table align="center" border="1" summary="Results from query 1"><tbody><tr><th style="background-color:#9e9e9e">DEPARTMENT_ID</th><th style="background-color:#9e9e9e">DEPARTMENT_NAME</th><th style="background-color:#9e9e9e">MANAGER_ID</th><th style="background-color:#9e9e9e">LOCATION_ID</th></tr><tr><td>280</td><td>Web Development</td><td>103</td><td>1700</td></tr></tbody></table><p>Los datos de tu contrataci&oacute;n son:</p><table align="center" border="1" summary="Results from query 1"><tbody><tr><th style="background-color:#9e9e9e">EMPLOYEE_ID</th><th style="background-color:#9e9e9e">HIRE_DATE</th><th style="background-color:#9e9e9e">JOB_ID</th><th style="background-color:#9e9e9e">SALARY</th><th style="background-color:#9e9e9e">COMMISSION_PCT</th><th style="background-color:#9e9e9e">MANAGER_ID</th></tr><tr><td style="text-align:center">220</td><td style="text-align:center">CURRENT_DATE</td><td style="text-align:center">IT_PROG</td><td style="text-align:center">1000</td><td style="text-align:center">0.1</td><td style="text-align:center">103</td></tr></tbody></table><p>El resto de datos (nombre, apellidos, ...) los tienes que rellenar con tus propios datos, teniendo en cuenta el tama&ntilde;o m&aacute;ximo permitido para cada atributo y el resto de restricciones.</p>